<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>微信浏览器打开模拟</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { font-family: sans-serif; margin: 20px; }
  .overlay, .chooser {
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.5);
    display: none; justify-content:center; align-items:center;
  }
  .dialog {
    background:#fff; padding:20px; border-radius:10px; text-align:center;
  }
  .browser-list {
    display:flex; justify-content:space-around; margin-top:20px;
  }
  .browser-item {
    cursor:pointer; text-align:center;
  }
  .browser-item img {
    width:48px; height:48px;
  }
</style>
</head>
<body>

<button onclick="showPrompt()">打开浏览器</button>

<div class="overlay" id="prompt">
  <div class="dialog">
    <p>即将离开微信，在浏览器中打开？</p>
    <button onclick="hidePrompt()">取消</button>
    <button onclick="showChooser()">允许</button>
  </div>
</div>

<div class="overlay" id="chooser" style="align-items:flex-end;">
  <div class="dialog" style="width:100%; border-radius:16px 16px 0 0;">
    <p>选择浏览器打开：</p>
    <div class="browser-list">
      <div class="browser-item" onclick="openBrowser('chrome')">
        <img src="https://img.icons8.com/color/48/000000/chrome.png" /><br>Chrome
      </div>
      <div class="browser-item" onclick="openBrowser('safari')">
        <img src="https://img.icons8.com/color/48/000000/safari--v1.png" /><br>Safari
      </div>
      <div class="browser-item" onclick="openBrowser('qq')">
        <img src="https://img.icons8.com/color/48/000000/qq.png" /><br>QQ浏览器
      </div>
      <div class="browser-item" onclick="openBrowser('uc')">
        <img src="https://img.icons8.com/color/48/000000/uc-browser.png" /><br>UC浏览器
      </div>
    </div>
    <button onclick="hideChooser()">取消</button>
  </div>
</div>

<script>
function showPrompt() {
  document.getElementById('prompt').style.display = 'flex';
}
function hidePrompt() {
  document.getElementById('prompt').style.display = 'none';
}
function showChooser() {
  hidePrompt();
  document.getElementById('chooser').style.display = 'flex';
}
function hideChooser() {
  document.getElementById('chooser').style.display = 'none';
}

// 下面是常用浏览器唤醒协议（iOS和Android可能不同）
function openBrowser(name) {
  const url = window.location.href;
  let schemeUrl = '';

  switch(name) {
    case 'chrome':
      schemeUrl = 'googlechrome://navigate?url=' + encodeURIComponent(url);
      break;
    case 'safari':
      // iOS Safari不支持scheme打开，只能引导用户自己打开
      alert('请使用Safari浏览器打开');
      return;
    case 'qq':
      schemeUrl = 'mqqbrowser://url=' + encodeURIComponent(url);
      break;
    case 'uc':
      schemeUrl = 'ucbrowser://navigate?url=' + encodeURIComponent(url);
      break;
    default:
      schemeUrl = url;
  }

  // 尝试跳转到对应浏览器
  window.location.href = schemeUrl;

  // 一般需要结合倒计时或页面提示做降级处理，微信可能拦截跳转
}
</script>

</body>
</html>
